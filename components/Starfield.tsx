'use client'
import React,{useEffect,useRef}from'react'
export default function Starfield(){const c=useRef<HTMLCanvasElement|null>(null);useEffect(()=>{const a=c.current!,x=a.getContext('2d')!;let w=a.width=window.innerWidth,h=a.height=window.innerHeight;const D=Math.min(window.devicePixelRatio||1,2);a.width=w*D;a.height=h*D;x.scale(D,D);const r=window.matchMedia('(prefers-reduced-motion: reduce)').matches;const N=Math.min(r?400:700,Math.floor((w*h)/(r?3600:2600)));const s=Array.from({length:N},()=>({x:Math.random()*w,y:Math.random()*h,vx:(Math.random()-.5)*.05,vy:(Math.random()-.5)*.05,r:Math.random()*1.1+.15,tw:Math.random()*Math.PI*2}));let f=0;const draw=()=>{x.clearRect(0,0,w,h);const g=x.createRadialGradient(w*.7,h*.3,60,w*.7,h*.3,Math.max(w,h));g.addColorStop(0,'rgba(80,120,255,0.10)');g.addColorStop(1,'rgba(0,0,0,0)');x.fillStyle=g;x.fillRect(0,0,w,h);for(const t of s){t.tw+=.02;const a1=.5+Math.sin(t.tw)*.5;x.beginPath();x.arc(t.x,t.y,t.r,0,Math.PI*2);x.fillStyle=`rgba(255,255,255,${a1})`;x.fill();t.x+=t.vx;t.y+=t.vy;if(t.x<-2)t.x=w+2;if(t.x>w+2)t.x=-2;if(t.y<-2)t.y=h+2;if(t.y>h+2)t.y=-2}x.lineWidth=.6;for(let i=0;i<s.length;i++){for(let j=i+1;j<i+40&&j<s.length;j++){const a=s[i],b=s[j],dx=a.x-b.x,dy=a.y-b.y,d2=dx*dx+dy*dy;if(d2<12100){x.strokeStyle=`rgba(147,197,253,${1-d2/12100})`;x.beginPath();x.moveTo(a.x,a.y);x.lineTo(b.x,b.y);x.stroke()}}}if(!r&&Math.random()<.012){const cx=Math.random()*w,cy=-10;for(let t=0;t<40;t++){x.beginPath();x.arc(cx+t*2,cy+t*3,Math.max(.5,2-t/30),0,Math.PI*2);x.fillStyle=`rgba(255,255,255,${(1-t/40)*.6})`;x.fill()}}f=requestAnimationFrame(draw)};draw();const onR=()=>{w=a.width=window.innerWidth;h=a.height=window.innerHeight};window.addEventListener('resize',onR);return()=>{cancelAnimationFrame(f);window.removeEventListener('resize',onR)}},[]);return <canvas ref={c} className='fixed inset-0 -z-10 h-full w-full bg-black' aria-hidden/>}
